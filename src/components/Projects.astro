---
import { siteConfig } from "../config";

const projects = siteConfig.projects ?? [];
const previewProjects = projects.slice(0, 4); // show all featured projects
const isExternal = (href: string) => /^https?:\/\//i.test(href);
---

<section id="projects" class="p-8 sm:p-12 md:p-16 lg:p-24">
  <div class="max-w-6xl mx-auto">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-16 items-start">
      <!-- Left header column (matches About/Experience/Education) -->
      <div class="lg:col-span-4">
        <h2 class="text-3xl sm:text-4xl md:text-5xl xl:text-7xl font-bold text-gray-100">
          Projects
        </h2>
        <div
          class="w-[75px] h-[5px] mt-2 rounded-full"
          style={`background-color: ${siteConfig.accentColor}`}
        ></div>
      </div>

      <!-- Right content column -->
      <div class="lg:col-span-8">
        <div class="grid gap-10">
          {previewProjects.map((project, index) => (
            <a
              href={project.link}
              target={isExternal(project.link) ? "_blank" : undefined}
              rel={isExternal(project.link) ? "noopener noreferrer" : undefined}
              class="group block bg-card border border-card rounded-3xl p-8 relative overflow-hidden hover:-translate-y-1 hover:shadow-xl transition-all duration-300"
            >
              <!-- TOP RIGHT ARROW ICON -->
              <div class="absolute top-6 right-6 w-11 h-11 flex items-center justify-center bg-white/5 group-hover:bg-white/10 rounded-full transition-all duration-300">
                <svg
                  class="w-5 h-5 text-gray-100 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform duration-300"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d="M7 17L17 7M17 7H7M17 7V17" />
                </svg>
              </div>

              <span class="text-sm font-mono" style={`color: ${siteConfig.accentColor}`}>
                {String(index + 1).padStart(2, "0")}
              </span>

              <h3 class="mt-4 text-2xl sm:text-3xl font-bold text-gray-100">
                {project.name}
              </h3>

              <p class="mt-3 text-gray-400 leading-relaxed">
                {project.description}
              </p>

              {project.skills && project.skills.length > 0 && (
                <div class="flex flex-wrap gap-2 mt-5">
                  {project.skills.map((skill) => (
                    <span class="px-3 py-1 rounded-full bg-white/10 text-gray-100 text-xs font-medium">
                      {skill}
                    </span>
                  ))}
                </div>
              )}
            </a>
          ))}
        </div>

        <div class="mt-10">
          <a
            href="/projects"
            class="inline-flex items-center px-5 py-2.5 rounded-full border border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-200 hover:text-black transition-all duration-300"
          >
            See more projects â†’
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
