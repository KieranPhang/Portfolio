---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Projects | {siteConfig.name}</title>
    <meta
      name="description"
      content="Projects by Kieran Phang – robotics, fabrication, and design work."
    />
  </head>

  <body class="bg-background text-foreground">
    <Header />

    <main class="p-8 sm:p-12 md:p-16 lg:p-24 max-w-5xl mx-auto">
      <header class="mb-10">
        <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900">
          Projects
        </h1>
        <p class="mt-3 text-gray-600 max-w-2xl">
          A deeper look at the systems, prototypes, and experiments I’ve built.
        </p>
      </header>

      {hasProjects ? (
        <div class="space-y-8">
          {siteConfig.projects.map((project, index) => {
            const isExternal = project.link?.startsWith("http");

            const Component = project.link ? "a" : "div";
            const linkProps = project.link
              ? isExternal
                ? {
                    href: project.link,
                    target: "_blank",
                    rel: "noopener noreferrer",
                  }
                : {
                    href: project.link,
                  }
              : {};

            return (
              <div class="group relative">
                <Component
                  {...linkProps}
                  class={`block relative p-5 sm:p-6 md:p-8 bg-gray-50 rounded-xl sm:rounded-2xl border border-gray-200 transition-all duration-300 ${
                    project.link
                      ? "hover:bg-white hover:shadow-xl hover:border-gray-300 hover:-translate-y-1"
                      : ""
                  }`}
                >
                  {project.link && (
                    <div class="absolute top-4 right-4 sm:top-6 sm:right-6 md:top-8 md:right-8 w-9 h-9 sm:w-10 sm:h-10 flex items-center justify-center bg-gray-900 rounded-full text-white transition-all duration-300 group-hover:bg-gray-700">
                      <svg
                        class="w-4 h-4 md:w-5 md:h-5 transition-transform duration-300 group-hover:translate-x-0.5 group-hover:-translate-y-0.5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M7 17L17 7M17 7H7M17 7V17"
                        />
                      </svg>
                    </div>
                  )}

                  <div class="space-y-4">
                    <div>
                      <span
                        class="text-sm font-mono"
                        style={{ color: siteConfig.accentColor }}
                      >
                        {String(index + 1).padStart(2, "0")}
                      </span>
                      <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mt-1">
                        {project.name}
                      </h2>
                    </div>

                    <p class="text-base sm:text-lg text-gray-600 leading-relaxed">
                      {project.description}
                    </p>

                    {project.skills && project.skills.length > 0 && (
                      <div class="flex flex-wrap gap-1.5 sm:gap-2 pt-2">
                        {project.skills.map((skill) => (
                          <span
                            class={`px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-900 text-white rounded-md sm:rounded-lg text-xs sm:text-sm font-medium transition-all duration-300 ${
                              project.link ? "group-hover:bg-gray-800" : ""
                            }`}
                          >
                            {skill}
                          </span>
                        ))}
                      </div>
                    )}
                  </div>
                </Component>
              </div>
            );
          })}
        </div>
      ) : (
        <p class="text-gray-500">No projects added yet.</p>
      )}
    </main>

    <Footer />
  </body>
</html>
